import { CodeBlock } from "../lib";
import { Actions } from "../../../storybook/components/actions";
import { Meta, Story, Canvas, ArgsTable } from "@storybook/addon-docs";
import dedent from "ts-dedent";

<Meta
  title="Components/CodeBlock"
  component={CodeBlock}
  argTypes={{
    showLineNumbers: {
      description: "Whether to show line numbers",
      defaultValue: false,
      control: {
        type: "boolean",
      },
    },
    showLanguage: {
      description: "Show the language of the code block",
      defaultValue: false,
      control: {
        type: "boolean",
      },
    },
    theme: {
      description: "Prisma theme file",
      control: {
        type: null,
      },
    },
    language: {
      description: "Language of the code block",
      defaultValue: "javascript",
      control: {
        type: "select",
        options: [
          "javascript",
          "typescript",
          "html",
          "css",
          "json",
          "yaml",
          "markdown",
        ],
      },
    },
    code: {
      description: "The code to be displayed",
      defaultValue: dedent`import * as React from 'react'
const CountContext = React.createContext()
  function countReducer(state, action) {
    switch (action.type) {
    case 'increment': {
      return {count: state.count + 1}
    }
    case 'decrement': {
      return {count: state.count - 1}
    }
    default: {
      throw new Error(\`Unhandled action type: \${action.type}\`)
    }
  }
}
function CountProvider({children}) {
  const [state, dispatch] = React.useReducer(countReducer, {count: 0})
  // NOTE: you _might_ need to memoize this value
  const value = {state, dispatch}
  return <CountContext.Provider value={value}>{children}</CountContext.Provider>
}
export {CountProvider}`,
      control: {
        type: "text",
      },
    },
  }}
/>

export const Template = (args) => <CodeBlock {...args} />;

# CodeBlock

A `CodeBlock` is a component that displays a bit of code.

<Actions packageName="code-block" />

## Import

```bash
import { CodeBlock } from '@daren/ui-components'
```

## Usage

<Canvas>
  <Story name="usage">{Template.bind({})}</Story>
</Canvas>

<ArgsTable story="usage" />
